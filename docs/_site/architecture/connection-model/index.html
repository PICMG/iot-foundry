<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Connection Model - IoTFoundry</title>
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Connection Model | IoTFoundry</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Connection Model" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Umbrella architecture and governance for the IoTFoundry project family" />
<meta property="og:description" content="Umbrella architecture and governance for the IoTFoundry project family" />
<link rel="canonical" href="http://0.0.0.0:4000/architecture/connection-model/" />
<meta property="og:url" content="http://0.0.0.0:4000/architecture/connection-model/" />
<meta property="og:site_name" content="IoTFoundry" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Connection Model" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Umbrella architecture and governance for the IoTFoundry project family","headline":"Connection Model","url":"http://0.0.0.0:4000/architecture/connection-model/"}</script>
<!-- End Jekyll SEO tag -->

    <!-- Google Fonts used by PICMG site (fallback to similar fonts if unavailable) -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/site.css">
    <link rel="icon" href="/assets/images/iotfoundry.svg" type="image/svg+xml">
    <link rel="alternate icon" href="/favicon.ico" type="image/x-icon">
  </head>
  <body>
    <header>
      <div class="site-header">
        <div class="brand">
          <a href="http://0.0.0.0:4000/" class="brand-link">
            <img src="/assets/images/iotfoundry.svg" alt="IoTFoundry" class="site-logo" />
            <div class="site-text">
              <span class="site-title">IoTFoundry</span>
              <span class="site-tagline">Industrial IoT, Forged by Open Source</span>
            </div>
          </a>
        </div>
        <nav class="main-nav">
          <a href="/">Home</a>
          <a href="/architecture/">Architecture</a>
          <a href="/governance/">Governance</a>
          <a href="/RelatedProjects/">Related Projects</a>
          <a href="/about/">About</a>
        </nav>
      </div>
      <hr/>
    </header>
    <main>
      
      <div class="page-container with-toc">
        <aside class="toc" id="toc">
          <div class="toc-title">On this page</div>
          <nav id="toc-content"></nav>
        </aside>
        <div class="content" id="page-content">
          <h1 id="connection-model">Connection Model</h1>

<p>This page describes the layered networking model used to connect microcontroller Endpoints to Linux hosts, from physical interfaces up through transport and data representation.</p>

<h2 id="physical-layer">Physical Layer</h2>

<p>IoTFoundry targets serial interfaces (UART) over RS-232 and RS-485 due to their robustness and ubiquity in industrial environments. RS-485 supports differential signaling and multidrop topologies but introduces limitations for dynamic discovery and event-driven messages because of collision risk on shared buses.</p>

<p>Design notes:</p>

<ul>
  <li>RS-232: simple point-to-point use cases (configuration, diagnostics).</li>
  <li>RS-485 (point-to-point): longer range with noise immunity.</li>
  <li>RS-485 (multidrop): supports many nodes but <em>cannot</em> safely support MCTP dynamic discovery or PLDM event-driven communications in typical multidrop setups.</li>
</ul>

<h2 id="physical-layer-software">Physical Layer Software</h2>

<ul>
  <li>Linux side: UART devices are exposed as <code class="language-plaintext highlighter-rouge">/dev/tty*</code> and handled via kernel drivers + the TTY subsystem. Userspace interacts with serial ports using POSIX APIs.</li>
  <li>Microcontroller side: typical UART peripheral drivers (vendor HAL, Zephyr, Arduino APIs) with interrupt or DMA-driven buffers.</li>
</ul>

<h2 id="transport-and-control-layer">Transport and Control Layer</h2>

<p>IoTFoundry uses MCTP as the transport for microcontroller endpoints. Linux provides an MCTP core and transport bindings such as <code class="language-plaintext highlighter-rouge">mctp-serial</code>. The <code class="language-plaintext highlighter-rouge">mctp-serial</code> module is typically enabled by assigning the <code class="language-plaintext highlighter-rouge">N_MCTP</code> line discipline to a serial port; it registers a net device and integrates with the kernel networking stack.</p>

<p>On microcontrollers, the MCTP implementation should be modular and lightweight, with components such as:</p>

<ul>
  <li>RX frame decoder and receive handler (incremental decoding, reassembly).</li>
  <li>Transmit framer and transmit handler (segmentation, in-place framing).</li>
  <li>Control message handler for EID requests, routing updates, and other management traffic.</li>
  <li>Simple application interface (e.g., <code class="language-plaintext highlighter-rouge">mctp_recv()</code>, <code class="language-plaintext highlighter-rouge">mctp_send(msg, dest_eid)</code>).</li>
</ul>

<h2 id="data-representation-layer">Data Representation Layer</h2>

<p>PLDM is used for structured device capabilities and telemetry. Endpoints store PDRs (Platform Descriptor Records) that describe sensors, effecters, and other resources. PLDM can be transformed into Redfish representations to integrate endpoint data into higher-level orchestration systems.</p>

<p>Linux components typically include a PLDM client, an optional PLDM listener for events, and tooling to collect and store PDRs. IoTFoundry intends to supply a userspace library that implements these functions (excluding application code and optional Redfish agent).</p>

<h2 id="microcontroller-considerations">Microcontroller Considerations</h2>

<ul>
  <li>Keep MCTP/PLDM implementations small and deterministic (fixed-size buffers, ring buffers, timeout cleanup).</li>
  <li>Avoid dynamic memory where possible; prefer in-place framing/segmentation and shallow queues.</li>
  <li>Event-driven PLDM messages are not suitable for multidrop RS-485 topologies.</li>
</ul>

<h2 id="diagrams">Diagrams</h2>

<p>See <code class="language-plaintext highlighter-rouge">/images/architecture-diagram.svg</code> for a top-level diagram. More detailed component diagrams are available under <code class="language-plaintext highlighter-rouge">/images/</code> (physical, transport, data layers) and may be expanded as the architecture grows.</p>

        </div>
      </div>
      <script>window.GLOSSARY = {"Binary-Encoding":"A compact data format used to reduce transmission and storage overhead, suitable for resource-constrained devices.","Effecter":"A controllable endpoint resource defined in PLDM, such as a GPIO or actuator.","Endpoint":"A microcontroller-based device that communicates using MCTP and PLDM, exposing telemetry and control interfaces.","Event Logging":"The process of logging local events.","Event-Driven Communication":"A feature that allows endpoints to send messages when triggered by a local event.","Firmware Update":"A method of applying firmware changes to endpoint devices.","GPIO":"General-Purpose Input/Output; a type of hardware control interface consisting of digital inputs and/or outputs.","Human-Machine Interface (HMI)":"A user interface that allows technicians or administrators to interact with the system.","MCTP":"Management Component Transport Protocol; a lightweight communication protocol used to send messages between devices like microcontrollers and Linux systems.","PDR":"Platform Descriptor Record; a binary-encoded data structure that describes an endpoint’s capabilities, commands, and telemetry interfaces.","PLDM":"Platform Level Data Model; a protocol layered over MCTP that defines structured commands, responses, and data models for platform management.","Redfish":"A DMTF-defined RESTful API and schema for system-level management, extended for industrial IoT by PICMG.","Resource-Constrained Device":"A device with limited memory and processing power, such as a microcontroller, for which binary-encoded PDRs are optimized.","Retransmission Policy":"A mechanism of a communication channel to ensure reliable delivery of messages in noisy environments.","Sensor Threshold Crossing":"A condition that occurs when a sensor value exceeds a defined limit.","Socket":"A software interface that enables communication between applications over a network.","Telemetry":"Data collected from endpoint devices, such as sensor readings and system status, used for monitoring and orchestration.","User-Space":"The portion of a computer’s operating system where applications and user-level processes run, separate from the kernel."};</script>
      <script src="/assets/js/toc.js"></script>
      <script src="/assets/js/glossary.js"></script>
      
    </main>
    <footer>
      <hr/>
      <p>See <a href="/">repository</a> for license and governance documents.</p>
    </footer>
  </body>
</html>
